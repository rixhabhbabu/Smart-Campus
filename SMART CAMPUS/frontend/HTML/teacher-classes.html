<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online Classes Management - Smart Campus (Teacher)</title>
    <link rel="stylesheet" href="../css/teacher.css">
    <link rel="stylesheet" href="../css/theme.css">
    <style>
        .class-form {
            background: var(--light-bg);
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
        }

        body.dark-mode .class-form {
            background: #2d2d2d;
        }

        .class-form h3 {
            margin-top: 0;
        }

        .classes-management {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: var(--shadow);
        }

        body.dark-mode .classes-management {
            background: #2d2d2d;
        }

        .class-item {
            padding: 1.5rem;
            background: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 1rem;
            border-left: 4px solid #17a2b8;
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 1rem;
            align-items: start;
        }

        body.dark-mode .class-item {
            background: #1a1a1a;
        }

        .class-item h4 {
            margin: 0;
            color: var(--dark-text);
        }

        body.dark-mode .class-item h4 {
            color: white;
        }

        .class-item-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 0.5rem;
        }

        .class-item-info-box {
            padding: 0.75rem;
            background: rgba(0,0,0,0.05);
            border-radius: 4px;
            font-size: 0.9rem;
        }

        body.dark-mode .class-item-info-box {
            background: rgba(255,255,255,0.1);
        }

        .class-item-actions {
            display: flex;
            gap: 0.5rem;
            flex-direction: column;
        }

        .class-item-actions .btn {
            padding: 0.5rem 1rem;
            font-size: 0.9rem;
            white-space: nowrap;
        }

        .status-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .status-upcoming {
            background: #ffc107;
            color: white;
        }

        .status-live {
            background: #28a745;
            color: white;
            animation: pulse 2s infinite;
        }

        .status-completed {
            background: #6c757d;
            color: white;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .recording-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            background: #17a2b8;
            color: white;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-left: 0.5rem;
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <h1 class="nav-title">ğŸ« Smart Campus</h1>
            <div class="nav-items">
                <span class="nav-user">ğŸ‘¨â€ğŸ« Teacher</span>
                <button class="nav-btn" id="themeToggle">ğŸŒ™</button>
                <a href="teacher.html" class="nav-btn" style="text-decoration: none;">â† Back</a>
            </div>
        </div>
    </nav>

    <div class="container">
        <aside class="sidebar">
            <ul class="sidebar-menu">
                <li><a href="teacher.html" class="menu-item">â† Back to Dashboard</a></li>
            </ul>
        </aside>

        <main class="main-content">
            <section class="content-section active">
                <h2>ğŸ¥ Online Classes Management</h2>

                <!-- CREATE CLASS FORM -->
                <div class="class-form">
                    <h3>ğŸ“¤ Schedule New Class</h3>
                    <div class="form-group">
                        <label for="classSubject">Subject:</label>
                        <select id="classSubject" required>
                            <option value="">-- Choose Subject --</option>
                            <option value="Data Structures">Data Structures</option>
                            <option value="Database Management">Database Management</option>
                            <option value="Web Development">Web Development</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="classTitle">Class Title:</label>
                        <input type="text" id="classTitle" placeholder="e.g., Linked Lists Fundamentals" required>
                    </div>
                    <div class="form-group">
                        <label for="classTopic">Topics to be Covered:</label>
                        <textarea id="classTopic" placeholder="e.g., Singly Linked List, Operations..." rows="3" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="classDateTime">Date & Time:</label>
                        <input type="datetime-local" id="classDateTime" required>
                    </div>
                    <div class="form-group">
                        <label for="classPlatform">Meeting Platform:</label>
                        <select id="classPlatform" required>
                            <option value="">-- Choose Platform --</option>
                            <option value="Google Meet">Google Meet</option>
                            <option value="Zoom">Zoom</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="classLink">Meeting Link:</label>
                        <input type="url" id="classLink" placeholder="https://meet.google.com/..." required>
                    </div>
                    <div class="form-group">
                        <label for="classDuration">Duration (in minutes):</label>
                        <input type="number" id="classDuration" placeholder="e.g., 60" required>
                    </div>
                    <button class="btn btn-primary" onclick="scheduleClass()">ğŸ“¤ Schedule Class</button>
                    <div id="classSuccess" class="success-message" style="display: none; margin-top: 1rem;">
                        âœ… Class scheduled successfully!
                    </div>
                </div>

                <!-- CLASSES LIST -->
                <div class="classes-management">
                    <h3>ğŸ“‹ Scheduled Classes</h3>
                    <div id="classesList"></div>
                </div>
            </section>
        </main>
    </div>

    <script src="../js/theme.js"></script>
    <script>
        // Sample data for teacher classes
        const teacherClasses = [
            {
                id: "CLS001",
                subject: "Data Structures",
                title: "Linked Lists - Part 1",
                date: "2024-12-23T14:00",
                platform: "Google Meet",
                link: "https://meet.google.com/abc-defg-hij",
                duration: 60,
                status: "upcoming",
                participants: 35,
                recordingAvailable: false,
                recordingLink: ""
            },
            {
                id: "CLS002",
                subject: "Web Development",
                title: "React Hooks Deep Dive",
                date: "2024-12-24T10:00",
                platform: "Zoom",
                link: "https://zoom.us/j/1234567890",
                duration: 90,
                status: "upcoming",
                participants: 42,
                recordingAvailable: false,
                recordingLink: ""
            },
            {
                id: "CLS003",
                subject: "Database Management",
                title: "SQL Joins Explained",
                date: "2024-12-20T15:30",
                platform: "Google Meet",
                link: "https://meet.google.com/xyz-uvwx-yz",
                duration: 60,
                status: "completed",
                participants: 40,
                recordingAvailable: true,
                recordingLink: "https://drive.google.com/file/d/recording123"
            }
        ];

        // Load classes on page load
        window.addEventListener('DOMContentLoaded', function() {
            loadClassesList();
        });

        function loadClassesList() {
            const container = document.getElementById('classesList');
            container.innerHTML = '';

            if (teacherClasses.length === 0) {
                container.innerHTML = '<p style="color: #999; text-align: center; padding: 2rem;">No classes scheduled yet.</p>';
                return;
            }

            teacherClasses.forEach(cls => {
                const item = document.createElement('div');
                item.className = 'class-item';
                const date = new Date(cls.date);
                const dateStr = date.toLocaleDateString() + ' ' + date.toLocaleTimeString([], {hour: '2-digit', minute: '2-digit'});
                
                let statusBadge = '';
                if (cls.status === 'upcoming') {
                    statusBadge = '<span class="status-badge status-upcoming">ğŸ“… Upcoming</span>';
                } else if (cls.status === 'live') {
                    statusBadge = '<span class="status-badge status-live">ğŸ”´ LIVE</span>';
                } else {
                    statusBadge = '<span class="status-badge status-completed">âœ… Completed</span>';
                }

                let recordingInfo = '';
                if (cls.recordingAvailable) {
                    recordingInfo = '<span class="recording-badge">ğŸ“¹ Recording Available</span>';
                }

                item.innerHTML = `
                    <div>
                        <div style="display: flex; gap: 1rem; align-items: center;">
                            <h4>${cls.title}</h4>
                            ${statusBadge}
                            ${recordingInfo}
                        </div>
                        <div class="class-item-info">
                            <div class="class-item-info-box">
                                <strong>ğŸ“š Subject:</strong><br>${cls.subject}
                            </div>
                            <div class="class-item-info-box">
                                <strong>ğŸ“… Date/Time:</strong><br>${dateStr}
                            </div>
                            <div class="class-item-info-box">
                                <strong>â±ï¸ Duration:</strong><br>${cls.duration} mins
                            </div>
                            <div class="class-item-info-box">
                                <strong>ğŸ‘¥ Participants:</strong><br>${cls.participants} students
                            </div>
                            <div class="class-item-info-box">
                                <strong>ğŸŒ Platform:</strong><br>${cls.platform}
                            </div>
                        </div>
                    </div>
                    <div class="class-item-actions">
                        <button class="btn btn-primary" onclick="copyLink('${cls.link}')">ğŸ”— Copy Link</button>
                        <button class="btn btn-secondary" onclick="viewDetails('${cls.id}')">ğŸ‘ï¸ Details</button>
                        <button class="btn btn-danger" onclick="deleteClass('${cls.id}')">ğŸ—‘ï¸ Delete</button>
                    </div>
                `;
                container.appendChild(item);
            });
        }

        function scheduleClass() {
            const subject = document.getElementById('classSubject').value;
            const title = document.getElementById('classTitle').value;
            const topic = document.getElementById('classTopic').value;
            const dateTime = document.getElementById('classDateTime').value;
            const platform = document.getElementById('classPlatform').value;
            const link = document.getElementById('classLink').value;
            const duration = document.getElementById('classDuration').value;

            if (!subject || !title || !topic || !dateTime || !platform || !link || !duration) {
                alert('âš ï¸ Please fill in all required fields!');
                return;
            }

            // Add new class
            const newClass = {
                id: 'CLS' + (teacherClasses.length + 1).toString().padStart(3, '0'),
                subject,
                title,
                date: dateTime,
                platform,
                link,
                duration: parseInt(duration),
                status: 'upcoming',
                participants: 0,
                recordingAvailable: false,
                recordingLink: ""
            };

            teacherClasses.push(newClass);

            // Reset form
            document.getElementById('classSubject').value = '';
            document.getElementById('classTitle').value = '';
            document.getElementById('classTopic').value = '';
            document.getElementById('classDateTime').value = '';
            document.getElementById('classPlatform').value = '';
            document.getElementById('classLink').value = '';
            document.getElementById('classDuration').value = '';

            // Show success message
            const successMsg = document.getElementById('classSuccess');
            successMsg.style.display = 'block';
            setTimeout(() => {
                successMsg.style.display = 'none';
            }, 3000);

            loadClassesList();
        }

        function copyLink(link) {
            navigator.clipboard.writeText(link);
            alert('âœ… Meeting link copied to clipboard!');
        }

        function viewDetails(classId) {
            alert('ğŸ‘ï¸ Viewing details for class ' + classId);
        }

        function deleteClass(classId) {
            if (confirm('Are you sure you want to delete this class?')) {
                const index = teacherClasses.findIndex(c => c.id === classId);
                if (index > -1) {
                    teacherClasses.splice(index, 1);
                    loadClassesList();
                    alert('âœ… Class deleted!');
                }
            }
        }
    </script>
</body>
</html>
